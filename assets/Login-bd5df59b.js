import{r as o,a as f,j as e,L as b,Q as t}from"./index-dd4f4c9f.js";import j from"./Loader-cdb4d57f.js";import{L as w,e as k,f as v}from"./Layout-0311dea1.js";import{a as C}from"./axios-1779699b.js";function S(){const[a,n]=o.useState(""),[i,u]=o.useState(""),[l,x]=o.useState(!1),[m,p]=o.useState(!1),[g,c]=o.useState(!1),h=f(),d=async()=>{c(!0);try{const s=await fetch("https://endpoints-ashy.vercel.app/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:i})}),r=await s.json();s.ok?(localStorage.setItem("user",JSON.stringify({token:r.token,userId:r.userId,email:r.email})),t.success("Login successful!"),h("/")):t.error(r.message||"Login failed. Please check your email and password.")}catch(s){console.error(s),t.error("Login failed. Please try again later.")}finally{c(!1)}},y=async()=>{if(!a){t.error("Please enter your email");return}try{const s=await C.post("https://endpoints-ashy.vercel.app/api/user/forgot-password",{email:a});t.success("Password has been reset and sent to your email")}catch(s){t.error("Failed to reset password"),console.error(s)}};return e.jsx(w,{children:e.jsxs("div",{className:"flex justify-center items-center",style:{marginBottom:"15rem",marginTop:"3rem",padding:"10px"},children:[g&&e.jsx(j,{})," ",e.jsxs("div",{className:"bg-gray-800 px-10 py-16 rounded-xl w-full max-w-md",style:{backgroundColor:"#3C2A21"},children:[e.jsx("div",{children:e.jsx("h1",{className:"text-center text-white text-xl mb-6 font-bold",children:"Login"})}),m?e.jsxs("div",{children:[e.jsx("input",{type:"email",value:a,onChange:s=>n(s.target.value),name:"email",className:"bg-gray-600 mb-6 px-4 py-3 w-full rounded-lg text-black placeholder-text-gray-200 outline-none",placeholder:"Email",style:{backgroundColor:"#DDD5C9"}}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("button",{onClick:y,className:"bg-black w-full text-white font-bold px-4 py-3 rounded-lg",style:{backgroundColor:"#DDD5C9",color:"#3C2A21"},children:"Reset Password"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("input",{type:"email",value:a,onChange:s=>n(s.target.value),name:"email",className:"bg-gray-600 mb-6 px-4 py-3 w-full rounded-lg text-black placeholder-text-gray-200 outline-none",placeholder:"Email",style:{backgroundColor:"#DDD5C9"}})}),e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",value:i,onChange:s=>u(s.target.value),onKeyDown:s=>{s.key==="Enter"&&d()},className:"bg-gray-600 mb-6 px-4 py-3 w-full rounded-lg text-black placeholder-text-gray-200 outline-none pr-10",placeholder:"Password",style:{backgroundColor:"#DDD5C9"}}),e.jsx("button",{type:"button",onClick:()=>x(!l),className:"absolute inset-y-0 right-0 px-4 text-black rounded-r-lg focus:outline-none flex items-center justify-center",style:{marginBottom:"15px"},children:l?e.jsx(k,{}):e.jsx(v,{})})]})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("button",{onClick:d,className:"bg-black w-full text-white font-bold px-4 py-3 rounded-lg",style:{backgroundColor:"#DDD5C9",color:"#3C2A21"},children:"Login"})}),e.jsx("div",{children:e.jsx("h2",{className:"text-white text-center text-sm cursor-pointer",onClick:()=>p(!0),style:{marginTop:"1rem"},children:"Forgot Password?"})})]}),e.jsx("div",{children:e.jsx("h2",{className:"text-white text-center text-sm",style:{marginTop:"1rem"},children:e.jsx(b,{className:"text-black font-bold px-1",to:"/signup",style:{transition:"transform 0.3s ease-in-out",display:"inline-block",color:"#DDD5C9"},children:e.jsx("u",{children:"Don't have an account yet? Signup"})})})})]})]})})}export{S as default};
