import{r as c,R as K,a as ve,j as e,Q as O,L as _e}from"./index-dd4f4c9f.js";import{G as Re,a as ge,F as $e,b as Y,c as Ee,L as Ae,d as ae}from"./Layout-0311dea1.js";import{m as we}from"./myContext-e65e4f51.js";import"./index-5fe2242d.js";import Oe from"./Loader-cdb4d57f.js";import{a as A}from"./axios-1779699b.js";import{P as He,S as ye,r as E}from"./PDFButton-bf045ba4.js";function le(s){return n=>!!n.type&&n.type.tabsRole===s}const X=le("Tab"),de=le("TabList"),ie=le("TabPanel");function Ie(s){return X(s)||de(s)||ie(s)}function ce(s,n){return c.Children.map(s,t=>t===null?null:Ie(t)?n(t):t.props&&t.props.children&&typeof t.props.children=="object"?c.cloneElement(t,{...t.props,children:ce(t.props.children,n)}):t)}function Ce(s,n){return c.Children.forEach(s,t=>{t!==null&&(X(t)||ie(t)?n(t):t.props&&t.props.children&&typeof t.props.children=="object"&&(de(t)&&n(t),Ce(t.props.children,n)))})}function Pe(s){var n,t,i="";if(typeof s=="string"||typeof s=="number")i+=s;else if(typeof s=="object")if(Array.isArray(s)){var d=s.length;for(n=0;n<d;n++)s[n]&&(t=Pe(s[n]))&&(i&&(i+=" "),i+=t)}else for(t in s)s[t]&&(i&&(i+=" "),i+=t);return i}function J(){for(var s,n,t=0,i="",d=arguments.length;t<d;t++)(s=arguments[t])&&(n=Pe(s))&&(i&&(i+=" "),i+=n);return i}function Se(s){let n=0;return Ce(s,t=>{X(t)&&n++}),n}function Te(s){return s&&"getAttribute"in s}function je(s){return Te(s)&&s.getAttribute("data-rttab")}function M(s){return Te(s)&&s.getAttribute("aria-disabled")==="true"}let V;function Le(s){const n=s||(typeof window<"u"?window:void 0);try{V=!!(typeof n<"u"&&n.document&&n.document.activeElement)}catch{V=!1}}const Ue={className:"react-tabs",focus:!1},ke=s=>{let n=c.useRef([]),t=c.useRef([]);const i=c.useRef();function d(r,x){if(r<0||r>=v())return;const{onSelect:P,selectedIndex:H}=s;P(r,H,x)}function j(r){const x=v();for(let P=r+1;P<x;P++)if(!M(b(P)))return P;for(let P=0;P<r;P++)if(!M(b(P)))return P;return r}function l(r){let x=r;for(;x--;)if(!M(b(x)))return x;for(x=v();x-- >r;)if(!M(b(x)))return x;return r}function N(){const r=v();for(let x=0;x<r;x++)if(!M(b(x)))return x;return null}function g(){let r=v();for(;r--;)if(!M(b(r)))return r;return null}function v(){const{children:r}=s;return Se(r)}function b(r){return n.current[`tabs-${r}`]}function S(){let r=0;const{children:x,disabledTabClassName:P,focus:H,forceRenderTabPanel:D,selectedIndex:_,selectedTabClassName:R,selectedTabPanelClassName:z,environment:W}=s;t.current=t.current||[];let Z=t.current.length-v();const ee=c.useId();for(;Z++<0;)t.current.push(`${ee}${t.current.length}`);return ce(x,I=>{let te=I;if(de(I)){let F=0,fe=!1;V==null&&Le(W);const he=W||(typeof window<"u"?window:void 0);V&&he&&(fe=K.Children.toArray(I.props.children).filter(X).some((me,se)=>he.document.activeElement===b(se))),te=c.cloneElement(I,{children:ce(I.props.children,me=>{const se=`tabs-${F}`,be=_===F,re={tabRef:De=>{n.current[se]=De},id:t.current[F],selected:be,focus:be&&(H||fe)};return R&&(re.selectedClassName=R),P&&(re.disabledClassName=P),F++,c.cloneElement(me,re)})})}else if(ie(I)){const F={id:t.current[r],selected:_===r};D&&(F.forceRender=D),z&&(F.selectedClassName=z),r++,te=c.cloneElement(I,F)}return te})}function $(r){const{direction:x,disableUpDownKeys:P,disableLeftRightKeys:H}=s;if(u(r.target)){let{selectedIndex:D}=s,_=!1,R=!1;(r.code==="Space"||r.keyCode===32||r.code==="Enter"||r.keyCode===13)&&(_=!0,R=!1,w(r)),!H&&(r.keyCode===37||r.code==="ArrowLeft")||!P&&(r.keyCode===38||r.code==="ArrowUp")?(x==="rtl"?D=j(D):D=l(D),_=!0,R=!0):!H&&(r.keyCode===39||r.code==="ArrowRight")||!P&&(r.keyCode===40||r.code==="ArrowDown")?(x==="rtl"?D=l(D):D=j(D),_=!0,R=!0):r.keyCode===35||r.code==="End"?(D=g(),_=!0,R=!0):(r.keyCode===36||r.code==="Home")&&(D=N(),_=!0,R=!0),_&&r.preventDefault(),R&&d(D,r)}}function w(r){let x=r.target;do if(u(x)){if(M(x))return;const P=[].slice.call(x.parentNode.children).filter(je).indexOf(x);d(P,r);return}while((x=x.parentNode)!=null)}function u(r){if(!je(r))return!1;let x=r.parentElement;do{if(x===i.current)return!0;if(x.getAttribute("data-rttabs"))break;x=x.parentElement}while(x);return!1}const{children:C,className:T,disabledTabClassName:f,domRef:a,focus:m,forceRenderTabPanel:o,onSelect:p,selectedIndex:k,selectedTabClassName:y,selectedTabPanelClassName:h,environment:xe,disableUpDownKeys:L,disableLeftRightKeys:Q,...U}={...Ue,...s};return K.createElement("div",Object.assign({},U,{className:J(T),onClick:w,onKeyDown:$,ref:r=>{i.current=r,a&&a(r)},"data-rttabs":!0}),S())};ke.propTypes={};const ze=0,G=1,Fe={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},Me=s=>s.selectedIndex===null?G:ze,ue=s=>{const{children:n,defaultFocus:t,defaultIndex:i,focusTabOnClick:d,onSelect:j,...l}={...Fe,...s},[N,g]=c.useState(t),[v]=c.useState(Me(l)),[b,S]=c.useState(v===G?i||0:null);if(c.useEffect(()=>{g(!1)},[]),v===G){const u=Se(n);c.useEffect(()=>{if(b!=null){const C=Math.max(0,u-1);S(Math.min(b,C))}},[u])}const $=(u,C,T)=>{typeof j=="function"&&j(u,C,T)===!1||(d&&g(!0),v===G&&S(u))};let w={...s,...l};return w.focus=N,w.onSelect=$,b!=null&&(w.selectedIndex=b),delete w.defaultFocus,delete w.defaultIndex,delete w.focusTabOnClick,K.createElement(ke,w,n)};ue.propTypes={};ue.tabsRole="Tabs";const qe={className:"react-tabs__tab-list"},pe=s=>{const{children:n,className:t,...i}={...qe,...s};return K.createElement("ul",Object.assign({},i,{className:J(t),role:"tablist"}),n)};pe.tabsRole="TabList";pe.propTypes={};const ne="react-tabs__tab",Be={className:ne,disabledClassName:`${ne}--disabled`,focus:!1,id:null,selected:!1,selectedClassName:`${ne}--selected`},q=s=>{let n=c.useRef();const{children:t,className:i,disabled:d,disabledClassName:j,focus:l,id:N,selected:g,selectedClassName:v,tabIndex:b,tabRef:S,...$}={...Be,...s};return c.useEffect(()=>{g&&l&&n.current.focus()},[g,l]),K.createElement("li",Object.assign({},$,{className:J(i,{[v]:g,[j]:d}),ref:w=>{n.current=w,S&&S(w)},role:"tab",id:`tab${N}`,"aria-selected":g?"true":"false","aria-disabled":d?"true":"false","aria-controls":`panel${N}`,tabIndex:b||(g?"0":null),"data-rttab":!0}),t)};q.propTypes={};q.tabsRole="Tab";const Ne="react-tabs__tab-panel",Ke={className:Ne,forceRender:!1,selectedClassName:`${Ne}--selected`},B=s=>{const{children:n,className:t,forceRender:i,id:d,selected:j,selectedClassName:l,...N}={...Ke,...s};return K.createElement("div",Object.assign({},N,{className:J(t,{[l]:j}),role:"tabpanel",id:`panel${d}`,"aria-labelledby":`tab${d}`}),i||j?n:null)};B.tabsRole="TabPanel";B.propTypes={};function Qe(s){return Re({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 10h-2V8h2v2zm0-4h-2V1h2v5zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03L21 4.96 19.25 4l-3.7 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"}}]})(s)}function We(){const[s,n]=c.useState([]),[t,i]=c.useState("date"),[d,j]=c.useState(!1),[l,N]=c.useState(0),g=5,[v,b]=c.useState([]);c.useEffect(()=>{(async()=>{try{const m=await A.get("https://endpoints-ashy.vercel.app/api/order/getorders");n(m.data.orders)}catch(m){console.error("Error fetching orders:",m)}})()},[]);const S=c.useMemo(()=>[{Header:"Order Id",accessor:"uniqueOrderId"},{Header:"Product Info",accessor:a=>{const m=a.cartItems.map(o=>(`${o.imageUrls[0]}`,`
            <div style="margin-bottom: 20px; padding-bottom: 10px;">
              <div style="text-align: center;">
                <div><strong>Product Name:</strong> ${o.name}</div>
                <div><strong>Price:</strong> ₹${o.price}</div>
                <div><strong>Category:</strong> ${o.category.name||"N/A"}</div>
                <div><strong>Color:</strong>
                  <button
                    class="w-8 h-8 rounded-full border-2"
                    style="background-color: ${o.selectedColor}"
                  ></button>
                </div>
                <div><strong>Size:</strong> ${o.selectedSize}</div>
                <div><strong>Quantity:</strong> ${o.quantity}</div>
              </div>
            </div>
          `)).join("<br/><br/>");return e.jsx("div",{dangerouslySetInnerHTML:{__html:m}})}},{Header:"Current Payment Status",accessor:a=>a.status||"Pending"},{Header:"Edit Payment Status",accessor:(a,m)=>e.jsxs("select",{value:v[m]||a.status||"pending",onChange:async o=>{const p=o.target.value,k=a.uniqueOrderId,y=[...v];y[m]=p,b(y);try{const h=await A.put(`https://endpoints-ashy.vercel.app/api/order/updatestatus/${k}/payment-status`,{status:p});O.success(h.data.message)}catch{O.error("Error updating payment status"),y[m]=a.paymentStatus,b(y)}},children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Received",children:"Received"})]})},{Header:"Shipping Status",accessor:a=>a.shippingStatus||"Pending"},{Header:"Date",accessor:a=>new Date(a.orderDate).toLocaleString()},{Header:"Download Invoice",accessor:a=>e.jsxs("div",{className:"flex gap-2 cursor-pointer text-black",children:[e.jsx("button",{onClick:()=>w(a),className:"px-4 py-2 bg-[#3C2A21] text-white rounded-lg",children:"Download Invoice"}),e.jsx("button",{onClick:()=>$(a._id),className:"",children:e.jsx(Y,{size:20})})]})}],[v]),$=async a=>{try{const m=await A.delete(`https://endpoints-ashy.vercel.app/api/order/deleteOrder/${a}`);O.success("Order deleted successfully"),n(o=>o.filter(p=>p._id!==a))}catch(m){O.error("Failed to delete the order"),console.error(m)}},w=async a=>{const m=await He.create(),o=m.addPage([600,800]),p=await m.embedFont(ye.HelveticaBold),k=await m.embedFont(ye.TimesRoman),y=50;let h=o.getHeight()-50;o.drawText("HEKAWY Invoice",{x:y,y:h,size:30,font:p,color:E(0,0,0)}),h-=40,o.drawText(`Customer Name: ${a.addressInfo.name}`,{x:y,y:h,size:12,font:p,color:E(0,0,0)}),h-=20,o.drawText(`Customer Phone Number: ${a.addressInfo.phoneNumber}`,{x:y,y:h,size:12,font:p,color:E(0,0,0)}),h-=20,o.drawText(`Customer Email: ${a.email}`,{x:y,y:h,size:12,font:p,color:E(0,0,0)}),h-=20;const xe=`${a.addressInfo.roomNo}, ${a.addressInfo.society}, ${a.addressInfo.street}, ${a.addressInfo.city}, ${a.addressInfo.pincode}`;o.drawText(`Address: ${xe}`,{x:y,y:h,size:12,font:p,color:E(0,0,0)}),h-=20,o.drawText(`Order ID: ${a.uniqueOrderId}`,{x:y,y:h,size:12,font:p,color:E(0,0,0)}),h-=20,o.drawText(`Payment Method: ${a.paymentMethod}`,{x:y,y:h,size:12,font:p,color:E(0,0,0)}),h-=20,o.drawText(`Payment Status: ${a.status}`,{x:y,y:h,size:12,font:p,color:E(0,0,0)}),a.paymentMethod==="Online"&&(h-=20,o.drawText(`Payment ID: ${a.paymentId}`,{x:y,y:h,size:12,font:p,color:E(0,0,0)})),h-=20,o.drawText(`Order Date: ${new Date(a.orderDate).toLocaleString()}`,{x:y,y:h,size:12,font:p,color:E(0,0,0)}),h-=40;const L=(_,R,z,W,Z,ee,I)=>{o.drawText(_,{x:R+5,y:z+5,size:I,font:ee,color:E(0,0,0)}),o.drawRectangle({x:R,y:z,width:W,height:Z,borderColor:E(0,0,0),borderWidth:1})},Q=20,U=20,r=[300,100,100];L("Product Name",y,h,r[0],Q,p,12),L("Quantity",y+r[0],h,r[1],Q,p,12),L("Price (Rs.)",y+r[0]+r[1],h,r[2],Q,p,12),h-=Q,a.cartItems.forEach(_=>{var R,z;L(_.name||"N/A",y,h,r[0],U,k,12),L(((R=_.quantity)==null?void 0:R.toString())||"0",y+r[0],h,r[1],U,k,12),L(((z=_.price)==null?void 0:z.toString())||"0.00",y+r[0]+r[1],h,r[2],U,k,12),h-=U}),h-=U,L(`Total Amount (Rs.): ${a.grandTotal}`,y,h,r[0]+r[1]+r[2],U,p,14);const x=await m.save(),P=new Blob([x],{type:"application/pdf"}),H=URL.createObjectURL(P),D=document.createElement("a");D.href=H,D.download=`Invoice_${a.uniqueOrderId}.pdf`,D.click(),URL.revokeObjectURL(H)},u=a=>{a===t?j(!d):(i(a),j(!1))},C=c.useMemo(()=>[...s].sort((m,o)=>m[t]<o[t]?d?1:-1:m[t]>o[t]?d?-1:1:0),[s,t,d]),T=C.slice(l*g,(l+1)*g),f=Math.ceil(C.length/g);return e.jsxs("div",{className:"px-4 md:px-0 mb-16",style:{marginBottom:"10rem"},children:[e.jsx("h1",{className:"text-center mb-5 text-3xl font-semibold underline",children:"Order Details"}),e.jsxs("div",{className:"relative overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500",children:[e.jsx("thead",{className:"text-xs text-black uppercase bg-gray-200 border border-gray-600 shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]",children:e.jsx("tr",{children:S.map(a=>e.jsxs("th",{onClick:()=>u(a.accessor),className:"px-4 py-2 cursor-pointer",children:[a.Header,t===a.accessor?d?" ▼":" ▲":""]},a.Header))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map((a,m)=>e.jsx("tr",{className:"hover:bg-gray-100 transition-colors duration-200",children:S.map((o,p)=>e.jsx("td",{className:"px-4 py-2",children:o.accessor instanceof Function?o.accessor(a,m):a[o.accessor]},p))},m))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 px-4 py-2 bg-gray-200",children:[e.jsx("button",{onClick:()=>N(a=>Math.max(a-1,0)),disabled:l===0,className:`px-4 py-2 rounded-lg ${l>0?"bg-[#3C2A21] text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Previous"}),e.jsxs("span",{className:"mx-4 text-gray-600",children:["Page ",e.jsx("strong",{children:l+1})," of ",e.jsx("strong",{children:f})]}),e.jsx("button",{onClick:()=>N(a=>Math.min(a+1,f-1)),disabled:l>=f-1,className:`px-4 py-2 rounded-lg ${l<f-1?"bg-[#3C2A21] text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Next"})]})]})]})}function Ge(){const[s,n]=c.useState([]),[t,i]=c.useState("name"),[d,j]=c.useState(!1),[l,N]=c.useState(0),[g,v]=c.useState(0),b=5;c.useEffect(()=>{(async()=>{try{const C=await A.get("https://endpoints-ashy.vercel.app/api/user/getusers",{params:{sortBy:t,sortDesc:d,pageIndex:l,pageSize:b}});n(C.data.users),v(C.data.totalPages)}catch(C){console.error("Error fetching users:",C)}})()},[t,d,l]);const S=c.useMemo(()=>[{Header:"User Id",accessor:"_id"},{Header:"Name",accessor:"name"},{Header:"Email",accessor:"email"},{Header:"Action",Cell:({row:u})=>e.jsx("button",{onClick:()=>w(u._id),children:e.jsx(Y,{size:20})})}],[]),$=u=>{u===t?j(!d):(i(u),j(!1))},w=async u=>{try{const C=await A.delete(`https://endpoints-ashy.vercel.app/api/user/deleteUser/${u}`);O.success("User deleted successfully"),n(T=>T.filter(f=>f._id!==u))}catch(C){O.error("Failed to delete the User"),console.error(C)}};return e.jsxs("div",{className:"px-4 md:px-0 mb-16",children:[e.jsx("h1",{className:"text-center mb-5 text-3xl font-semibold underline",children:"User Details"}),e.jsxs("div",{className:"relative overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500",children:[e.jsx("thead",{className:"text-xs text-black uppercase bg-gray-200 border border-gray-600 shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]",children:e.jsx("tr",{children:S.map(u=>e.jsxs("th",{onClick:()=>$(u.accessor),className:"px-4 py-2 cursor-pointer",children:[u.Header,t===u.accessor?d?" ▼":" ▲":""]},u.Header))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((u,C)=>e.jsx("tr",{className:"hover:bg-gray-100 transition-colors duration-200",children:S.map(T=>e.jsx("td",{className:"px-4 py-2",children:T.Cell?T.Cell({row:u}):u[T.accessor]},T.Header))},C))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 px-4 py-2 bg-gray-200",children:[e.jsx("button",{onClick:()=>N(u=>Math.max(u-1,0)),disabled:l===0,className:`px-4 py-2 rounded-lg ${l>0?"bg-[#3C2A21] text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Previous"}),e.jsxs("span",{className:"mx-4 text-gray-600",children:["Page ",e.jsx("strong",{children:l+1})," of ",e.jsx("strong",{children:g})]}),e.jsx("button",{onClick:()=>N(u=>Math.min(u+1,g-1)),disabled:l>=g-1,className:`px-4 py-2 rounded-lg ${l<g-1?"bg-[#3C2A21] text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Next"})]})]})]})}function Ve(){const[s,n]=c.useState([]),[t,i]=c.useState("title"),[d,j]=c.useState(!1),[l,N]=c.useState(0),[g,v]=c.useState(!1),b=5,S=ve();c.useEffect(()=>{(async()=>{try{const p=await A.get("https://endpoints-ashy.vercel.app/api/products/getproducts");n(p.data)}catch(p){console.error("Error fetching products:",p)}})()},[]);const $=o=>o.sort((p,k)=>p[t]<k[t]?d?1:-1:p[t]>k[t]?d?-1:1:0),w=o=>{const p=l*b;return o.slice(p,p+b)},u=o=>{o===t?j(!d):(i(o),j(!1))},C=async o=>{try{const p=await A.delete(`https://endpoints-ashy.vercel.app/api/products/deleteProduct/${o}`);O.success("Product deleted successfully"),n(s.filter(k=>k._id!==o))}catch(p){O.error("Failed to delete the Product"),console.error(p)}},T=()=>{const o=$(s);return w(o).map((k,y)=>e.jsxs("tr",{className:"bg-gray-50 border-b dark:border-gray-700",children:[e.jsx("td",{className:"px-6 py-4 text-black",children:k.name}),e.jsx("td",{className:"px-6 py-4 font-medium text-black whitespace-nowrap",children:e.jsx("img",{className:"w-16",src:`https://endpoints-ashy.vercel.app${k.imageUrls[0]}`,alt:"Product"})}),e.jsxs("td",{className:"px-6 py-4 text-black",children:["₹",k.price]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2 cursor-pointer text-black",children:[e.jsx("div",{onClick:()=>C(k._id),children:e.jsx(Y,{size:20})}),e.jsx("div",{onClick:()=>S(`/updateproduct/${k._id}`),children:e.jsx(_e,{to:`/updateproduct/${k._id}`,children:e.jsx(Ee,{size:20})})})]})})]},y))},f=Math.ceil(s.length/b),a=()=>{l>0&&N(o=>o-1)},m=()=>{l<f-1&&N(o=>o+1)};return e.jsxs("div",{className:"px-4 md:px-0 mb-16",children:[e.jsx("h1",{className:"text-center mb-2 text-3xl font-semibold underline",children:"Product Details"}),g&&e.jsx(Oe,{}),e.jsx("div",{className:"flex justify-center text-center ",children:e.jsx("button",{onClick:()=>S("/addproduct"),className:"focus:outline-none text-white bg-black shadow-[inset_0_0_10px_rgba(0,0,0,0.6)] border hover:bg-pink-700 outline-0 font-medium rounded-lg text-sm px-5 py-2.5 mb-2",children:"Add Product"})}),e.jsxs("div",{className:"relative overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs border border-gray-600 text-black uppercase bg-gray-200",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-6 py-3 cursor-pointer",onClick:()=>u("title"),children:["Title ",t==="title"&&e.jsx("span",{children:d?"▼":"▲"})]}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Image"}),e.jsxs("th",{className:"px-6 py-3 cursor-pointer",onClick:()=>u("price"),children:["Price ",t==="price"&&e.jsx("span",{children:d?"▼":"▲"})]}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),e.jsx("tbody",{children:T()})]}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{onClick:a,disabled:l===0,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-l-md mr-2",children:"Prev"}),e.jsx("button",{onClick:m,disabled:l===f-1,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-r-md",children:"Next"})]})]})]})}function Ye(){const[s,n]=c.useState([]),[t,i]=c.useState(!0),[d,j]=c.useState(null),[l,N]=c.useState("createdAt"),[g,v]=c.useState(!1),[b,S]=c.useState(0),$=5;c.useEffect(()=>{(async()=>{try{const a=await A.get("https://endpoints-ashy.vercel.app/api/order/getcancel-requests",{params:{page:b+1,pageSize:$,sortBy:l,sortDesc:g.toString()}});n(a.data.data)}catch(a){j(a)}finally{i(!1)}})()},[b,l,g]);const w=c.useMemo(()=>[{Header:"Order ID",accessor:"uniqueOrderId"},{Header:"Reason for Cancellation/Return",accessor:"reason"},{Header:"Product Photo",accessor:f=>e.jsx("img",{src:`https://endpoints-ashy.vercel.app${f.productPhoto}`,alt:"Product",style:{width:"100px",height:"auto"}})},{Header:"Full Name",accessor:"name"},{Header:"Email",accessor:"email"},{Header:"Phone Number",accessor:"phoneNumber"},{Header:"Date",accessor:f=>new Date(f.createdAt).toLocaleString()},{Header:"Action",accessor:f=>e.jsx("div",{className:"flex gap-2 cursor-pointer text-black",children:e.jsx("button",{onClick:()=>u(f._id),className:"",children:e.jsx(Y,{size:20})})})}],[]),u=async f=>{try{const a=await A.delete(`https://endpoints-ashy.vercel.app/api/order/deleteRequest/${f}`);O.success("Request deleted successfully"),n(m=>m.filter(o=>o._id!==f))}catch(a){O.error("Failed to delete the order"),console.error(a)}},C=f=>{f===l?v(!g):(N(f),v(!1))},T=10;return t?e.jsx("p",{children:"Loading..."}):d?e.jsxs("p",{children:["Error: ",d.message]}):e.jsxs("div",{className:"px-4 md:px-0 mb-16",children:[e.jsx("h1",{className:"text-center mb-5 text-3xl font-semibold underline",children:"Cancellation Requests"}),e.jsxs("div",{className:"relative overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500",children:[e.jsx("thead",{className:"text-xs text-black uppercase bg-gray-200 border border-gray-600 shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]",children:e.jsx("tr",{children:w.map(f=>e.jsxs("th",{onClick:()=>C(f.accessor),className:"px-4 py-2 cursor-pointer",children:[f.Header,l===f.accessor?g?" ▼":" ▲":""]},f.Header))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((f,a)=>e.jsx("tr",{className:"hover:bg-gray-100 transition-colors duration-200",children:w.map(m=>e.jsx("td",{className:"px-4 py-2",children:m.accessor instanceof Function?m.accessor(f):f[m.accessor]},m.Header))},a))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 px-4 py-2 bg-gray-200",children:[e.jsx("button",{onClick:()=>S(f=>Math.max(f-1,0)),disabled:b===0,className:`px-4 py-2 rounded-lg ${b>0?"bg-[#3C2A21] text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Previous"}),e.jsxs("span",{className:"mx-4 text-gray-600",children:["Page ",e.jsx("strong",{children:b+1})," of ",e.jsx("strong",{children:T})]}),e.jsx("button",{onClick:()=>S(f=>Math.min(f+1,T-1)),disabled:b>=T-1,className:`px-4 py-2 rounded-lg ${b<T-1?"bg-[#3C2A21] text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Next"})]})]})]})}function Xe(){const s=c.useContext(we),{mode:n,product:t,edithandle:i,deleteProduct:d,order:j,user:l,look:N,deleteLook:g}=s;return c.useState(!1),ve(),e.jsx(e.Fragment,{children:e.jsx("div",{className:"container mx-auto",children:e.jsx("div",{className:"tab container mx-auto ",children:e.jsxs(ue,{defaultIndex:0,className:" ",children:[e.jsxs(pe,{className:"md:flex md:space-x-8 bg-  grid grid-cols-2 text-center gap-4   md:justify-center mb-10 ",children:[e.jsx(q,{children:e.jsx("button",{type:"button",className:"font-medium border-b-2 hover:shadow-purple-700 border-purple-500 text-purple-500 rounded-lg text-xl shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]  px-5 py-1.5 text-center bg-[#605d5d12] ",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Qe,{}),"Products"]})})}),e.jsx(q,{children:e.jsx("button",{type:"button",className:"font-medium border-b-2 border-pink-500 bg-[#605d5d12] text-pink-500  hover:shadow-pink-700  rounded-lg text-xl shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]    px-5 py-1.5 text-center ",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ge,{})," Order"]})})}),e.jsx(q,{children:e.jsx("button",{type:"button",className:"font-medium border-b-2 border-pink-500 bg-[#605d5d12] text-pink-500  hover:shadow-pink-700  rounded-lg text-xl shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]    px-5 py-1.5 text-center ",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ge,{})," Cancel Request"]})})}),e.jsx(q,{children:e.jsx("button",{type:"button",className:"font-medium border-b-2 border-green-500 bg-[#605d5d12] text-green-500 rounded-lg text-xl  hover:shadow-green-700 shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]   px-5 py-1.5 text-center ",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($e,{})," Users"]})})})]}),e.jsx(B,{children:e.jsx(Ve,{product:t,deleteProduct:d,edithandle:i})}),e.jsx(B,{children:e.jsx(We,{order:j})}),e.jsx(B,{children:e.jsx(Ye,{})}),e.jsx(B,{children:e.jsx(Ge,{user:l})})]})})})})}function nt(){c.useContext(we);const[s,n]=c.useState({totalProducts:0,totalOrders:0,totalUsers:0});c.useEffect(()=>{(async()=>{try{const l=await A.get("https://endpoints-ashy.vercel.app/api/products/getproducts"),N=await A.get("https://endpoints-ashy.vercel.app/api/order/getorderscount"),g=await A.get("https://endpoints-ashy.vercel.app/api/user/getusers");n({totalProducts:l.data.length,totalOrders:N.data.length,totalUsers:g.data.totalUsers})}catch(l){console.error("Error fetching data:",l)}})()},[]);const{totalProducts:t,totalOrders:i,totalUsers:d}=s;return e.jsx(Ae,{children:e.jsxs("section",{className:"text-gray-600 body-font flex flex-col justify-center items-center",children:[e.jsx("div",{className:"container mx-auto px-4 mb-10",children:e.jsxs("div",{className:"flex flex-wrap -m-4 text-center",children:[e.jsx(oe,{icon:e.jsx(ae,{size:50}),count:t,label:"Total Products"}),e.jsx(oe,{icon:e.jsx(ae,{size:50}),count:i,label:"Total Orders"}),e.jsx(oe,{icon:e.jsx(ae,{size:50}),count:d,label:"Total Users"})]})}),e.jsx(Xe,{})]})})}const oe=({icon:s,count:n,label:t})=>e.jsx("div",{className:"p-4 md:w-1/3 sm:w-1/2 w-full",children:e.jsxs("div",{className:"border-2 hover:shadow-purple-600 shadow-[inset_0_0_10px_rgba(0,0,0,0.6)] bg-gray-100 border-gray-300 px-4 py-3 rounded-xl",children:[e.jsx("div",{className:"text-purple-500 w-12 h-12 mb-3 inline-block",viewBox:"0 0 24 24",children:s}),e.jsx("h2",{className:"title-font font-medium text-3xl text-black",children:n}),e.jsx("p",{className:" text-purple-500 font-bold",children:t})]})});export{nt as default};
