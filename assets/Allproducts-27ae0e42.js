import{r,j as e,u as j}from"./index-09219173.js";import{m as u}from"./myContext-e3aabfc1.js";import{P as b}from"./ProductCard-6054b794.js";import{a as d}from"./axios-1779699b.js";import{L as v}from"./Layout-c17a04c3.js";import{u as w}from"./useDispatch-a5d95d93.js";import"./Loader-ca36df74.js";function E(){const s=r.useContext(u),{searchkey:a,setSearchkey:m,products:p,setProducts:n,filterType:N,setFilterType:g,filterPrice:P,setFilterPrice:f}=s,[c,i]=r.useState(""),[l,h]=r.useState([]);r.useEffect(()=>{(async()=>{try{const o=await d.get("http://localhost:3000/api/products/categories");h(o.data.categories)}catch(o){console.error("Error fetching categories:",o)}})()},[]),r.useEffect(()=>{(async()=>{try{const o=c?`http://localhost:3000/api/products/getproducts/category/${c}`:"http://localhost:3000/api/products/getproducts",D=await d.get(o);n(D.data)}catch(o){console.error("Error fetching products:",o)}})()},[c,n]);const x=Array.from(new Set(l.map(t=>t._id)));console.log(x);const C=t=>{i(t.target.value)},y=()=>{i(""),m(""),g(""),f("")};return e.jsxs("div",{children:[e.jsx("div",{className:"container mx-auto px-4 mt-5",children:e.jsxs("div",{className:"p-5 rounded-lg bg-gray-50 shadow-md flex items-center justify-between",style:{backgroundColor:"#DDD5C9"},children:[e.jsx("div",{className:"flex mt-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4",children:e.jsxs("select",{value:c,onChange:C,className:"px-4 py-3 w-full rounded-md bg-[#3C2A21] text-[#DDD5C9] border border-[#3C2A21] hover:border-[#DDD5C9] focus:border-[#DDD5C9] outline-none focus:bg-[#3C2A21] focus:ring-2 focus:ring-[#DDD5C9] text-sm transition-colors duration-300 ease-in-out",children:[e.jsx("option",{value:"",children:"Category"}),l.map((t,o)=>e.jsx("option",{value:t._id,children:t.name},t._id))]})})}),e.jsx("div",{className:"mb-4 ml-4",style:{paddingTop:"25px"},children:e.jsx("button",{onClick:y,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 text-sm font-medium rounded-md transition-colors duration-300 ease-in-out",style:{backgroundColor:"rgb(60, 42, 33)",color:"#fff"},children:"Reset"})})]})}),e.jsx(b,{products:p,showDetails:!0})]})}function L(){r.useContext(u),w();const s=j(a=>a.cart);return console.log(s),r.useEffect(()=>{},[s]),r.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsx(v,{children:e.jsx(E,{})})}export{L as default};
