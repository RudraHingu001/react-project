import{r as n,j as e,Q as x}from"./index-dd4f4c9f.js";import{a as u}from"./axios-1779699b.js";import{L as w}from"./Layout-0311dea1.js";import S from"./Loader-cdb4d57f.js";import{S as P}from"./Google-268d10b0.js";import{n as I}from"./index-e00ecf1c.js";const L=()=>{const[l,r]=n.useState({name:"",price:"",category:"",description:"",sizes:[],fabric:"",washCareInstructions:"",colors:[],imageFiles:[]}),[h,b]=n.useState([]),[i,d]=n.useState(!1),[o,m]=n.useState(""),[g,p]=n.useState("");n.useEffect(()=>{u.get("https://endpoints-ashy.vercel.app/api/products/categories").then(s=>{b(s.data.categories)}).catch(s=>{console.error("Error fetching categories:",s)})},[]);const t=s=>{const{name:a,value:c}=s.target;r(v=>({...v,[a]:c}))},f=s=>{r(a=>({...a,imageFiles:Array.from(s.target.files)}))},j=s=>{const a=[...l.sizes];a.includes(s)?a.splice(a.indexOf(s),1):a.push(s),r({...l,sizes:a})},y=s=>{m(s.hex);const a=I(s.hex);p(a.basic[0].name)},N=()=>{o&&!l.colors.some(s=>s.hex===o)&&(r({...l,colors:[...l.colors,{hex:o,name:g}]}),m(""),p(""))},C=s=>{r({...l,colors:l.colors.filter(a=>a.hex!==s)})},k=async s=>{s.preventDefault(),d(!0);const a=new FormData;a.append("name",l.name),a.append("price",l.price),a.append("category",l.category),a.append("description",l.description),a.append("sizes",l.sizes),a.append("fabric",l.fabric),a.append("washCareInstructions",l.washCareInstructions),a.append("colors",JSON.stringify(l.colors));for(let c of l.imageFiles)a.append("images",c);try{const c=await u.post("https://endpoints-ashy.vercel.app/api/products/addproduct",a,{headers:{"Content-Type":"multipart/form-data"}});x.success(c.data.message),r({name:"",price:"",category:"",description:"",sizes:[],fabric:"",washCareInstructions:"",colors:[],imageFiles:[]})}catch{x.error("Error adding product")}finally{d(!1)}};return e.jsx(w,{children:e.jsx("div",{className:"flex justify-center items-center h-screen",style:{marginBottom:"5rem"},children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"px-10 py-10 rounded-xl",style:{backgroundColor:"#f5f5dc",maxHeight:"90vh",overflowY:"auto"},children:[i&&e.jsx(S,{}),e.jsx("h1",{className:"text-center text-black text-xl mb-4 font-bold",children:"Add Product"}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Product Name"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Name",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Price"}),e.jsx("input",{type:"number",name:"price",value:l.price,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Price",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Category"}),e.jsxs("select",{name:"category",value:l.category,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),h.map(s=>e.jsx("option",{value:s._id,children:s.name},s._id))]})]}),e.jsxs("div",{className:"flex flex-col mb-4",children:[e.jsx("label",{className:"text-black mb-2",children:"Add Size"}),e.jsx("div",{className:"flex flex-wrap items-center px-4",children:["s","m","l","xl"].map(s=>e.jsxs("label",{className:"flex items-center text-black mr-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:l.sizes.includes(s),onChange:()=>j(s),className:"mr-2"}),s.toUpperCase()]},s))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Description"}),e.jsx("textarea",{name:"description",value:l.description,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Description",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Fabric"}),e.jsx("input",{type:"text",name:"fabric",value:l.fabric,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Fabric",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Wash Care Instructions"}),e.jsx("textarea",{name:"washCareInstructions",value:l.washCareInstructions,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Wash Care Instructions",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Product Images"}),e.jsx("input",{type:"file",name:"images",onChange:f,multiple:!0,className:"bg-gray-300 px-2 py-2 w-full rounded-lg"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black text-center",children:"Select Colors"}),e.jsxs("center",{children:[e.jsx(P,{color:o,onChangeComplete:y}),e.jsx("button",{type:"button",onClick:N,className:"bg-yellow-500 text-black font-bold px-2 py-1 rounded-lg mt-3",children:"Add Color"})]})]}),e.jsxs("div",{className:"mb-4 flex justify-center items-center",children:[e.jsx("label",{className:"block text-black",children:"Colors Selected : Â "}),l.colors.map((s,a)=>e.jsxs("div",{className:"flex items-center mr-4 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:s.hex}}),e.jsx("span",{className:"text-black ml-2",children:s.name}),e.jsx("button",{onClick:()=>C(s.hex),className:"bg-red-500 text-white font-bold px-2 py-1 rounded-lg ml-2",children:"Remove"})]},a))]}),e.jsx("button",{type:"submit",className:"bg-yellow-500 text-black font-bold px-2 py-2 rounded-lg w-full",children:i?"Loading...":"Add Product"})]})]})})})})};export{L as default};
