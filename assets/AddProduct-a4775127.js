import{r as o,j as e,Q as x}from"./index-09219173.js";import{a as u}from"./axios-1779699b.js";import{L as w}from"./Layout-c17a04c3.js";import S from"./Loader-ca36df74.js";import{S as P}from"./Google-0937377d.js";import{n as I}from"./index-1e49601e.js";const L=()=>{const[l,r]=o.useState({name:"",price:"",category:"",description:"",sizes:[],fabric:"",washCareInstructions:"",colors:[],imageFiles:[]}),[h,b]=o.useState([]),[i,d]=o.useState(!1),[n,m]=o.useState(""),[g,p]=o.useState("");o.useEffect(()=>{u.get("http://localhost:3000/api/products/categories").then(a=>{b(a.data.categories)}).catch(a=>{console.error("Error fetching categories:",a)})},[]);const t=a=>{const{name:s,value:c}=a.target;r(v=>({...v,[s]:c}))},f=a=>{r(s=>({...s,imageFiles:Array.from(a.target.files)}))},j=a=>{const s=[...l.sizes];s.includes(a)?s.splice(s.indexOf(a),1):s.push(a),r({...l,sizes:s})},N=a=>{m(a.hex);const s=I(a.hex);p(s.basic[0].name)},y=()=>{n&&!l.colors.some(a=>a.hex===n)&&(r({...l,colors:[...l.colors,{hex:n,name:g}]}),m(""),p(""))},C=a=>{r({...l,colors:l.colors.filter(s=>s.hex!==a)})},k=async a=>{a.preventDefault(),d(!0);const s=new FormData;s.append("name",l.name),s.append("price",l.price),s.append("category",l.category),s.append("description",l.description),s.append("sizes",l.sizes),s.append("fabric",l.fabric),s.append("washCareInstructions",l.washCareInstructions),s.append("colors",JSON.stringify(l.colors));for(let c of l.imageFiles)s.append("images",c);try{const c=await u.post("http://localhost:3000/api/products/addproduct",s,{headers:{"Content-Type":"multipart/form-data"}});x.success(c.data.message),r({name:"",price:"",category:"",description:"",sizes:[],fabric:"",washCareInstructions:"",colors:[],imageFiles:[]})}catch{x.error("Error adding product")}finally{d(!1)}};return e.jsx(w,{children:e.jsx("div",{className:"flex justify-center items-center h-screen",style:{marginBottom:"5rem"},children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"px-10 py-10 rounded-xl",style:{backgroundColor:"#f5f5dc",maxHeight:"90vh",overflowY:"auto"},children:[i&&e.jsx(S,{}),e.jsx("h1",{className:"text-center text-black text-xl mb-4 font-bold",children:"Add Product"}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Product Name"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Name",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Price"}),e.jsx("input",{type:"number",name:"price",value:l.price,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Price",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Category"}),e.jsxs("select",{name:"category",value:l.category,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),h.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]})]}),e.jsxs("div",{className:"flex flex-col mb-4",children:[e.jsx("label",{className:"text-black mb-2",children:"Add Size"}),e.jsx("div",{className:"flex flex-wrap items-center px-4",children:["s","m","l","xl"].map(a=>e.jsxs("label",{className:"flex items-center text-black mr-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:l.sizes.includes(a),onChange:()=>j(a),className:"mr-2"}),a.toUpperCase()]},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Description"}),e.jsx("textarea",{name:"description",value:l.description,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Description",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Fabric"}),e.jsx("input",{type:"text",name:"fabric",value:l.fabric,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Fabric",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Wash Care Instructions"}),e.jsx("textarea",{name:"washCareInstructions",value:l.washCareInstructions,onChange:t,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Wash Care Instructions",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Product Images"}),e.jsx("input",{type:"file",name:"images",onChange:f,multiple:!0,className:"bg-gray-300 px-2 py-2 w-full rounded-lg"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black text-center",children:"Select Colors"}),e.jsxs("center",{children:[e.jsx(P,{color:n,onChangeComplete:N}),e.jsx("button",{type:"button",onClick:y,className:"bg-yellow-500 text-black font-bold px-2 py-1 rounded-lg mt-3",children:"Add Color"})]})]}),e.jsxs("div",{className:"mb-4 flex justify-center items-center",children:[e.jsx("label",{className:"block text-black",children:"Colors Selected : Â "}),l.colors.map((a,s)=>e.jsxs("div",{className:"flex items-center mr-4 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:a.hex}}),e.jsx("span",{className:"text-black ml-2",children:a.name}),e.jsx("button",{onClick:()=>C(a.hex),className:"bg-red-500 text-white font-bold px-2 py-1 rounded-lg ml-2",children:"Remove"})]},s))]}),e.jsx("button",{type:"submit",className:"bg-yellow-500 text-black font-bold px-2 py-2 rounded-lg w-full",children:i?"Loading...":"Add Product"})]})]})})})})};export{L as default};
