import{r as o,j as e,Q as u}from"./index-5fd673c1.js";import{a as h}from"./axios-1779699b.js";import{L as w}from"./Layout-30cd21a8.js";import{S}from"./Google-862040e4.js";import{n as I}from"./index-cdd1c66d.js";import B from"./Loader-96d0f6a9.js";const L=()=>{const[a,t]=o.useState({name:"",price:"",category:"",description:"",sizes:[],fabric:"",washCareInstructions:"",colors:[],imagesByColor:{}}),[b,g]=o.useState([]),[d,m]=o.useState(!1),[n,p]=o.useState(""),[f,x]=o.useState("");o.useEffect(()=>{h.get("https://endpoints-ashy.vercel.app/api/products/categories").then(s=>{g(s.data.categories)}).catch(s=>{console.error("Error fetching categories:",s)})},[]);const c=s=>{const{name:l,value:r}=s.target;t(i=>({...i,[l]:r}))},y=s=>{const l=[...a.sizes];l.includes(s)?l.splice(l.indexOf(s),1):l.push(s),t({...a,sizes:l})},C=s=>{p(s.hex);const l=I(s.hex);x(l.basic[0].name)},j=()=>{n&&!a.colors.some(s=>s.hex===n)&&(t({...a,colors:[...a.colors,{hex:n,name:f}],imagesByColor:{...a.imagesByColor,[n]:[]}}),p(""),x(""))},N=s=>{const l=a.colors.filter(i=>i.hex!==s),r={...a.imagesByColor};delete r[s],t({...a,colors:l,imagesByColor:r})},k=(s,l)=>{const r=Array.from(s.target.files);t({...a,imagesByColor:{...a.imagesByColor,[l]:r}})},v=async s=>{s.preventDefault(),m(!0);const l=new FormData;l.append("name",a.name),l.append("price",a.price),l.append("category",a.category),l.append("description",a.description),l.append("sizes",JSON.stringify(a.sizes)),l.append("fabric",a.fabric),l.append("washCareInstructions",a.washCareInstructions),l.append("colors",JSON.stringify(a.colors)),Object.keys(a.imagesByColor).forEach(r=>{a.imagesByColor[r].forEach(i=>{l.append(`colorImages-${r}`,i)})});try{const r=await h.post("https://endpoints-ashy.vercel.app/api/products/addproduct",l,{headers:{"Content-Type":"multipart/form-data"}});u.success(r.data.message),t({name:"",price:"",category:"",description:"",sizes:[],fabric:"",washCareInstructions:"",colors:[],imagesByColor:{}})}catch{u.error("Error adding product")}finally{m(!1)}};return e.jsx(w,{children:e.jsx("div",{className:"flex justify-center items-center h-screen",style:{marginBottom:"10rem"},children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"px-10 py-10 rounded-xl",style:{backgroundColor:"#f5f5dc",maxHeight:"90vh",overflowY:"auto"},children:[d&&e.jsx(B,{}),e.jsx("h1",{className:"text-center text-black text-xl mb-4 font-bold",children:"Add Product"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Product Name"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Name",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Price"}),e.jsx("input",{type:"number",name:"price",value:a.price,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Price",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Category"}),e.jsxs("select",{name:"category",value:a.category,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),b.map(s=>e.jsx("option",{value:s._id,children:s.name},s._id))]})]}),e.jsxs("div",{className:"flex flex-col mb-4",children:[e.jsx("label",{className:"text-black mb-2",children:"Add Size"}),e.jsx("div",{className:"flex flex-wrap items-center px-4",children:["s","m","l","xl"].map(s=>e.jsxs("label",{className:"flex items-center text-black mr-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:a.sizes.includes(s),onChange:()=>y(s),className:"mr-2"}),s.toUpperCase()]},s))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Description"}),e.jsx("textarea",{name:"description",value:a.description,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Description",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Fabric"}),e.jsx("input",{type:"text",name:"fabric",value:a.fabric,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Fabric",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Wash Care Instructions"}),e.jsx("textarea",{name:"washCareInstructions",value:a.washCareInstructions,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Wash Care Instructions",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Product Images"}),a.colors.map(s=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-black",children:["Images for ",s.name]}),e.jsx("input",{type:"file",multiple:!0,onChange:l=>k(l,s.hex),className:"bg-gray-300 px-2 py-2 w-full rounded-lg"})]},s.hex))]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black text-center",children:"Select Colors"}),e.jsxs("center",{children:[e.jsx(S,{color:n,onChangeComplete:C}),e.jsx("button",{type:"button",onClick:j,className:"bg-yellow-500 text-black font-bold px-2 py-1 rounded-lg mt-3",children:"Add Color"})]})]}),e.jsxs("div",{className:"mb-4 flex justify-center items-center",children:[e.jsx("label",{className:"block text-black",children:"Colors Selected : Â "}),a.colors.map((s,l)=>e.jsxs("div",{className:"flex items-center mr-4 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:s.hex}}),e.jsx("span",{className:"text-black ml-2",children:s.name}),e.jsx("button",{onClick:()=>N(s.hex),className:"bg-red-500 text-white font-bold px-2 py-1 rounded-lg ml-2",children:"Remove"})]},l))]}),e.jsx("button",{type:"submit",className:"bg-yellow-500 text-black font-bold px-2 py-2 rounded-lg w-full",children:d?"Loading...":"Add Product"})]})]})})})})};export{L as default};
