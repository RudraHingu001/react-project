import{i as I,a as P,r as o,j as e,Q as b}from"./index-09219173.js";import{a as m}from"./axios-1779699b.js";import{L as z}from"./Layout-c17a04c3.js";import F from"./Loader-ca36df74.js";import{S as q}from"./Google-0937377d.js";import{n as E}from"./index-1e49601e.js";const R=()=>{const{productId:i}=I(),g=P(),[t,l]=o.useState({name:"",price:"",category:"",description:"",sizes:[],fabric:"",washCareInstructions:"",colors:[],imageFiles:[]}),[f,j]=o.useState([]),[p,u]=o.useState(!1),[n,x]=o.useState(""),[y,h]=o.useState("");o.useEffect(()=>{m.get("http://localhost:3000/api/products/categories").then(a=>{j(a.data.categories)}).catch(a=>{console.error("Error fetching categories:",a)}),m.get(`http://localhost:3000/api/products/getproducts/${i}`).then(a=>{const s=a.data,r=s.sizes[0].split(","),d=JSON.parse(s.colors);console.log(s),l({name:s.name,price:s.price,category:s.category,description:s.description,sizes:r,fabric:s.fabric,washCareInstructions:s.washCareInstructions,colors:d,imageFiles:[]})}).catch(a=>{console.error("Error fetching product details:",a)})},[i]);const c=a=>{const{name:s,value:r}=a.target;l(d=>({...d,[s]:r}))},N=a=>{l(s=>({...s,imageFiles:Array.from(a.target.files)}))},C=a=>{const s=[...t.sizes];s.includes(a)?s.splice(s.indexOf(a),1):s.push(a),l({...t,sizes:s})},k=a=>{x(a.hex);const s=E(a.hex);h(s.basic[0].name)},v=()=>{n&&!t.colors.some(a=>a.hex===n)&&(l({...t,colors:[...t.colors,{hex:n,name:y}]}),x(""),h(""))},w=a=>{l({...t,colors:t.colors.filter(s=>s.hex!==a)})},S=async a=>{a.preventDefault(),u(!0);const s=new FormData;s.append("name",t.name),s.append("price",t.price),s.append("category",t.category),s.append("description",t.description),s.append("sizes",t.sizes),s.append("fabric",t.fabric),s.append("washCareInstructions",t.washCareInstructions),s.append("colors",JSON.stringify(t.colors));for(let r of t.imageFiles)s.append("images",r);try{const r=await m.put(`http://localhost:3000/api/products/updateproduct/${i}`,s,{headers:{"Content-Type":"multipart/form-data"}});b.success(r.data.message),g("/dashboard")}catch{b.error("Error updating product")}finally{u(!1)}};return e.jsx(z,{children:e.jsx("div",{className:"flex justify-center items-center h-screen",style:{marginBottom:"5rem"},children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"px-10 py-10 rounded-xl",style:{backgroundColor:"#f5f5dc",maxHeight:"90vh",overflowY:"auto"},children:[p&&e.jsx(F,{}),e.jsx("h1",{className:"text-center text-black text-xl mb-4 font-bold",children:"Update Product"}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Product Name"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Name",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Price"}),e.jsx("input",{type:"number",name:"price",value:t.price,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Price",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Category"}),e.jsxs("select",{name:"category",value:t.category,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),f.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]})]}),e.jsxs("div",{className:"flex flex-col mb-4",children:[e.jsx("label",{className:"text-black mb-2",children:"Add Size"}),e.jsx("div",{className:"flex flex-wrap items-center px-4",children:["s","m","l","xl"].map(a=>e.jsxs("label",{className:"flex items-center text-black mr-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:t.sizes.includes(a),onChange:()=>C(a),className:"mr-2"}),a.toUpperCase()]},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Description"}),e.jsx("textarea",{name:"description",value:t.description,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Product Description",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Fabric"}),e.jsx("input",{type:"text",name:"fabric",value:t.fabric,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Fabric",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Wash Care Instructions"}),e.jsx("textarea",{name:"washCareInstructions",value:t.washCareInstructions,onChange:c,className:"bg-gray-300 px-2 py-2 w-full rounded-lg",placeholder:"Wash Care Instructions",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black",children:"Product Images"}),e.jsx("input",{type:"file",name:"images",onChange:N,multiple:!0,className:"bg-gray-300 px-2 py-2 w-full rounded-lg"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-black text-center",children:"Select Colors"}),e.jsxs("center",{children:[e.jsx(q,{color:n,onChangeComplete:k}),e.jsx("button",{type:"button",onClick:v,className:"bg-yellow-500 text-black font-bold px-2 py-1 rounded-lg mt-3",children:"Add Color"})]})]}),e.jsxs("div",{className:"mb-4 flex justify-center items-center",children:[e.jsx("label",{className:"block text-black",children:"Colors Selected : Â "}),t.colors.map((a,s)=>e.jsxs("div",{className:"flex items-center mr-4 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:a.hex}}),e.jsx("span",{className:"text-black ml-2",children:a.name}),e.jsx("button",{onClick:()=>w(a.hex),className:"bg-red-500 text-white font-bold px-2 py-1 rounded-lg ml-2",children:"Remove"})]},s))]}),e.jsx("button",{type:"submit",className:"bg-yellow-500 text-black font-bold px-2 py-2 rounded-lg w-full",children:p?"Loading...":"Update Product"})]})]})})})})};export{R as default};
