import{j as e,r,i as P,a as U,Q as n,k as $}from"./index-5fd673c1.js";import{L as M,g as L}from"./Layout-30cd21a8.js";import{m as D}from"./myContext-c7ebabbc.js";import E from"./Loader-96d0f6a9.js";import{u as F}from"./useDispatch-9fd3a558.js";const T=({showModal:d,setShowModal:i})=>d?e.jsx("div",{className:"fixed top-0 left-0 z-50 w-full h-full flex items-center justify-center bg-black bg-opacity-75",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg w-80 relative",children:[e.jsx("button",{className:"absolute top-2 right-2 text-black text-lg transition duration-300 hover:text-gray-400 transform hover:scale-110",onClick:()=>i(!1),children:"Close"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Size Chart"}),e.jsxs("table",{className:"table-auto w-full text-left text-sm",style:{fontSize:"12px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1",children:"Size"}),e.jsx("th",{className:"px-2 py-1",children:"S"}),e.jsx("th",{className:"px-2 py-1",children:"M"}),e.jsx("th",{className:"px-2 py-1",children:"L"}),e.jsx("th",{className:"px-2 py-1",children:"XL"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:"Bust"}),e.jsx("td",{className:"border px-2 py-1",children:"34-36"}),e.jsx("td",{className:"border px-2 py-1",children:"36.5-38"}),e.jsx("td",{className:"border px-2 py-1",children:"38.5-40"}),e.jsx("td",{className:"border px-2 py-1",children:"40.5-45"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:"Waist"}),e.jsx("td",{className:"border px-2 py-1",children:"26-28"}),e.jsx("td",{className:"border px-2 py-1",children:"28.5-30"}),e.jsx("td",{className:"border px-2 py-1",children:"30.5-32"}),e.jsx("td",{className:"border px-2 py-1",children:"32.5-37"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:"Hip"}),e.jsx("td",{className:"border px-2 py-1",children:"36-38"}),e.jsx("td",{className:"border px-2 py-1",children:"38.5-40"}),e.jsx("td",{className:"border px-2 py-1",children:"40.5-42"}),e.jsx("td",{className:"border px-2 py-1",children:"42.5-47"})]})]})]})]})}):null;function R(){const d=r.useContext(D),{loading:i,setLoading:o}=d,[l,g]=r.useState(null),[B,b]=r.useState(null),[y,N]=r.useState(""),[x,C]=r.useState(""),[m,h]=r.useState(""),[v,J]=r.useState(1),[w,u]=r.useState(!1),[j,p]=r.useState(null),f=P(),S=F(),A=U();r.useEffect(()=>{(async()=>{o(!0);try{const t=await fetch(`https://endpoints-ashy.vercel.app/api/products/getproducts/${f.id}`),a=await t.json();if(t.ok){g(a);const c=a.colors&&a.colors[0];c&&c.imageUrls&&c.imageUrls.length>0&&(N(c.imageUrls[0]),p(c.imageUrls[0]),h(c.hex))}else n.error(a.message||"Product not found.");o(!1)}catch{n.error("Failed to fetch product details."),o(!1)}})()},[f.id,o]);const I=()=>{if(!x){n.error("Please select a size.");return}if(!m){n.error("Please select a color.");return}const s=localStorage.getItem("user"),t=s?JSON.parse(s):null,a=t?t.userId:null;S($({...l,selectedSize:x,selectedColor:m,quantity:v,userId:a})),A("/cart")},k=(s,t)=>{h(s.hex),b(t),p(s.imageUrls[0]||l.imageUrls[0])},z=s=>{p(s)};return e.jsx(M,{children:e.jsx("section",{className:"text-gray-600 body-font overflow-hidden",style:{marginBottom:"5rem"},children:e.jsxs("div",{className:"container px-6 py-12 mx-auto",children:[i?e.jsx(E,{}):l&&e.jsxs("div",{className:"flex flex-wrap lg:flex-nowrap",children:[e.jsx("div",{className:"lg:w-1/2 w-full lg:pr-10 lg:pb-0 pb-6",children:e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx("img",{alt:"ecommerce",className:"w-full h-full object-cover rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300",src:j!==null?`https://endpoints-ashy.vercel.app${j}`:`https://endpoints-ashy.vercel.app${y}`}),e.jsx("div",{className:"flex mt-4 space-x-2 overflow-x-auto",children:l.colors&&l.colors.map((s,t)=>s.imageUrls.map((a,c)=>e.jsx("img",{src:`https://endpoints-ashy.vercel.app${a}`,alt:`product-${a}`,className:"w-24 h-24 object-cover rounded-lg cursor-pointer",onClick:()=>z(a)},`${t}-${c}`)))})]})}),e.jsxs("div",{className:"lg:w-1/2 w-full lg:pl-10 lg:py-6",children:[e.jsx("h2",{className:"text-sm title-font text-gray-500 tracking-widest mb-2 uppercase",style:{color:"#3C2A21"},children:"Product Name"}),e.jsx("h1",{className:"text-3xl font-semibold mb-4 text-gray-900",style:{color:"#3C2A21"},children:l.name}),e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs("span",{className:"text-2xl font-semibold text-gray-900 mr-4",style:{color:"#3C2A21"},children:["â‚¹",l.price]}),e.jsx("button",{onClick:I,className:"bg-[#3C2A21] text-white py-2 px-4 rounded-lg hover:bg-[#3C2A21] focus:bg-gray-700 transition-colors duration-200",children:"Add To Cart"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-bold text-gray-700 mb-2",style:{color:"#3C2A21"},children:"Available Sizes:"}),e.jsxs("div",{className:"flex flex-wrap space-x-2 mb-4",children:[e.jsxs("button",{onClick:()=>u(!0),className:"text-[#3C2A21] cursor-pointer text-sm border border-gray-400 px-3 py-1 rounded-md flex items-center",children:[e.jsx(L,{className:"mr-1"}),"Size Chart"]}),l.sizes&&JSON.parse(l.sizes[0]).map((s,t)=>e.jsx("button",{onClick:()=>C(s),className:`px-4 py-2 rounded-lg ${x===s?"bg-[#3C2A21] text-[#fff]":"bg-gray-200 text-[#3C2A21]"}`,children:s.toUpperCase()},t))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2 font-bold",style:{color:"#3C2A21"},children:"Available Colors:"}),e.jsx("div",{className:"flex flex-wrap space-x-2",children:l.colors&&l.colors.map((s,t)=>e.jsx("button",{onClick:()=>k(s,t),className:`w-8 h-8 rounded-full border-2 ${m===s.hex?"ring-2 ring-[#3C2A21]":""}`,style:{backgroundColor:s.hex},title:s.name},t))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("p",{className:"text-sm font-bold text-gray-700",style:{color:"#3C2A21"},children:"Description:"}),e.jsx("p",{className:"text-sm text-gray-800 mt-2",children:l.description})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("p",{className:"text-sm font-bold text-gray-700",style:{color:"#3C2A21"},children:"Fabric:"}),e.jsx("p",{className:"text-sm text-gray-800 mt-2",children:l.fabric})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"text-sm font-bold text-gray-700",style:{color:"#3C2A21"},children:"Wash Care Instructions:"}),e.jsx("p",{className:"text-sm text-gray-800 mt-2",children:l.washCareInstructions})]})]})]})]}),e.jsx(T,{showModal:w,setShowModal:u})," "]})})})}export{R as default};
